<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Homkai的工具分享</title>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/lodash.js/4.17.10/lodash.min.js"></script>
</head>
<body>
<h1 style="text-align: center">常用工具分享</h1>
<div>
    <h2>输入bgr色值，显示颜色</h2>
    <input type="text" id="bgr" value="190,235,140">
    <div id="bgr-bg" style="width: 50px;height: 50px;"></div>
</div>
<div id="rows2ids">
    <h2>多行转逗号分隔字符串（自动去重、去空行、去空格）</h2>
    <textarea class="input-rows" rows="10"></textarea>
    <br>
    <input type="text" class="input-ids" disabled/>
    console访问：window.list<span class="list_index"></span>
</div>
<div id="ids2rows">
    <h2>逗号分隔转多行字符串</h2>
    <input type="text" class="input-ids" />
    <br>
    <textarea class="input-rows" rows="10" disabled></textarea>
</div>
<div id="diff-rows">
    <h2>对比两列找不同（自动去重、去空行、去空格）</h2>
    <textarea id="diff-rows-1" rows="10"></textarea>
    <textarea id="diff-rows-2" rows="10"></textarea>
    <br>
    <div style="float: left">
        <p>左边比右边多的</p>
        <textarea id="diff-rows-3" rows="10" disabled></textarea>
    </div>
    <div style="float: left">
        <p>右边比左边多的</p>
        <textarea id="diff-rows-4" rows="10" disabled></textarea>
    </div>
</div>
<script>
  console.info('控制台可以直接用jquery、lodash');

  const formatList = list => _.uniq(list.trim().split('\n').map(item => item.trim()))

  let list_index = 0
  $('#rows2ids .input-rows').on('input', function () {
    const val = $(this).val();
    const list = formatList(val);
    window['list' + list_index] = list;
    $('#rows2ids .list_index').text(list_index++);
    $('#rows2ids .input-ids').val(list.join(','));
  })

  $('#ids2rows .input-ids').on('input', function () {
    const val = $(this).val().trim();
    $('#ids2rows .input-rows').val(val.split(',').join('\n'));
  })


  $('#diff-rows-1,#diff-rows-2').on('input', function () {
    const list1 = formatList($('#diff-rows-1').val());
    const list2 = formatList($('#diff-rows-2').val());
    $('#diff-rows-3').val(_.difference(list1, list2).join('\n'))
    $('#diff-rows-4').val(_.difference(list2, list1).join('\n'))
  })

  $('#bgr').on('input', function() {
    const val = $(this).val().split(',').map(item => item.trim());
    const [b, g, r] = val;
    $('#bgr-bg').css({'background-color': `rgb(${r}, ${g}, ${b})`})
  })
  $('#bgr').trigger('input')


</script>
</body>
</html>